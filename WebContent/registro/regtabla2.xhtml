<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<f:view>
	<h:head>
		<title>Tablas</title>
		<link rel="stylesheet" href="css/style.css" type="text/css" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
	</h:head>
	<h:body>


		<ui:composition template="/WEB-INF/template/plantillabasica.xhtml">

			<ui:define name="content">

				<h:form id="formt">
					<p:growl id="msgs" showDetail="true" />
					<!--  -->
					<p:panel id="panelGuardar" autosized="true"
						header="Registrar Tabla">

						<h:panelGrid id="gridGuardar" columns="3">
							<h:outputText value="Id:" for="idtabla" />
							<p:inputText id="idtabla" value="#{tablaBacking.idtabla}"
								maxlength="2">
							</p:inputText>
							<p:watermark for="idtabla" value="Id"></p:watermark>
							<h:outputText value="Nombre:" for="nombretabla" />
							<p:inputText id="nombretabla" value="#{tablaBacking.nombretabla}"
								maxlength="25">
							</p:inputText>
							<p:watermark for="nombretabla" value="Nombre"></p:watermark>
							<h:outputLabel></h:outputLabel>
							<h:panelGrid columns="2">
								<h:commandButton value="Guardar"
									action="#{tablaBacking.guardar}" />
								<h:commandButton value="Nuevo" icon="ui-icon-disk"
									actionListener="#{tablaBacking.limpiar}" />
							</h:panelGrid>



						</h:panelGrid>
						<p:spacer width="100" height="10" />


						<div class="mensaje">
							<h:outputText value="#{tablaBacking.mensaje}" id="mensaje">
							</h:outputText>
						</div>
						<p:separator />
						<!--  -->

						<p:dataTable value="#{tablaBacking.listadoTabla}" var="tab"
							id="tabla" rows="3" style="width:500px" paginator="true"
							editable="true">
							<f:facet name="header">
								<p:columnGroup>
									<p:column colspan="5">
										<h:outputText value="Registros encontrados"></h:outputText>
									</p:column>
								</p:columnGroup>

							</f:facet>

							<!-- 
							<p:ajax event="cellEdit" listener="#{tablaBacking.onCellEdit}"
								update=":formt:msgs" /> -->

							<p:ajax event="rowEdit" listener="#{tablaBacking.onRowEdit}"
								update=":formt:msgs" />
							<p:ajax event="rowEditCancel"
								listener="#{tablaBacking.onRowCancel}" update=":formt:msgs" />

							<p:column headerText="Id">
								<h:outputText value="#{tab.idtabla}"></h:outputText>
								<f:facet name="header">
									<h:outputText value="Id"></h:outputText>
								</f:facet>
							</p:column>
							<p:column headerText="Tabla">
								<h:outputText value="#{tab.nombretabla}"></h:outputText>
								<p:cellEditor>
									<f:facet name="output">
										<h:outputText ></h:outputText>
									</f:facet>
									<f:facet name="input">
										<p:inputText id="ntedicion" value="#{tablaBacking.ntedicion}"
											label="Tabla"></p:inputText>
									</f:facet>
								</p:cellEditor>
							</p:column>
							<p:column rowspan="1">
								<h:outputText value="#{tab.fechareg}"></h:outputText>
								<f:facet name="header">
									<h:outputText value="Registro"></h:outputText>
								</f:facet>
							</p:column>

							<p:column>
								<f:facet name="header">
									<h:outputText value="Opc"></h:outputText>
								</f:facet>
								<p:rowEditor />
							</p:column>
						</p:dataTable>

						<!-- 
						<p:contextMenu for="tabla" widgetVar="tMenu">
							<p:menuitem value="Editar Celda" icon="ui-icon-search"
								onclick="PF('celdaTabla').showCellEditor();return false;" />
							<p:menuitem value="Ocultar menÃº" icon="ui-icon-close"
								onclick="PF('tMenu').hide()" />
						</p:contextMenu>
 -->
						<h:commandLink id="excel">
							<h:graphicImage value="/img/excel.png" />
							<p:dataExporter type="xls" target="tabla" fileName="datos" />
						</h:commandLink>
						<h:commandLink id="pdf">
							<h:graphicImage value="/img/pdf.png" />
							<p:dataExporter type="pdf" target="tabla" fileName="datos" />
						</h:commandLink>
					</p:panel>
				</h:form>

			</ui:define>
		</ui:composition>



	</h:body>
</f:view>
</html>